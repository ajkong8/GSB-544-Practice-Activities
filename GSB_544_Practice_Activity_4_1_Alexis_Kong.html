<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>XML, HTML, and Web Scraping</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="GSB_544_Practice_Activity_4_1_Alexis_Kong_files/libs/clipboard/clipboard.min.js"></script>
<script src="GSB_544_Practice_Activity_4_1_Alexis_Kong_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="GSB_544_Practice_Activity_4_1_Alexis_Kong_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="GSB_544_Practice_Activity_4_1_Alexis_Kong_files/libs/quarto-html/popper.min.js"></script>
<script src="GSB_544_Practice_Activity_4_1_Alexis_Kong_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="GSB_544_Practice_Activity_4_1_Alexis_Kong_files/libs/quarto-html/anchor.min.js"></script>
<link href="GSB_544_Practice_Activity_4_1_Alexis_Kong_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="GSB_544_Practice_Activity_4_1_Alexis_Kong_files/libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="GSB_544_Practice_Activity_4_1_Alexis_Kong_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="GSB_544_Practice_Activity_4_1_Alexis_Kong_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="GSB_544_Practice_Activity_4_1_Alexis_Kong_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">XML, HTML, and Web Scraping</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>JSON and XML are two different ways to represent hierarchical data. Which one is better? There are lots of articles online which discuss similarities and differences between JSON and XML and their advantages and disadvantages. Both formats are still in current usage, so it is good to be familiar with both. However, JSON is more common, so we’ll focus on working with JSON representations of hierarchical data.</p>
<p>The reading covered an example of using Beautiful Soup to parse XML. Rather than doing another example XML now, we’ll skip straight to scraping HTML from a webpage. Both HTML and XML can be parsed in a similar way with Beautiful Soup.</p>
<div id="cell-2" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="scraping-an-html-table-with-beautiful-soup" class="level2">
<h2 class="anchored" data-anchor-id="scraping-an-html-table-with-beautiful-soup">Scraping an HTML table with Beautiful Soup</h2>
<p>Open the URL https://en.wikipedia.org/wiki/List_of_United_States_cities_by_population and scroll down until you see a table of the cities in the U.S. with population over 100,000 (as of Jul 1, 2022). We’ll use Beautiful Soup to scrape information from this table.</p>
<p>Read in the HTML from the ULR using the <code>requests</code> library.</p>
<div id="cell-6" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://en.wikipedia.org/wiki/List_of_United_States_cities_by_population"</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(<span class="st">"https://en.wikipedia.org/wiki/List_of_United_States_cities_by_population"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-7" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>URL <span class="op">=</span> <span class="st">"https://en.wikipedia.org/wiki/List_of_United_States_cities_by_population"</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>HEADERS <span class="op">=</span> {<span class="st">"User-Agent"</span>: <span class="st">"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"</span>}</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(URL, headers<span class="op">=</span>HEADERS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use Beautiful Soup to parse this string into a tree called <code>soup</code></p>
<div id="cell-9" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(response.content, <span class="st">"html.parser"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To find an HTML tag corresponding to a specific element on a webpage, right-click on it and choose “Inspect element”. Go to the cities table Wikipedia page and do this now.</p>
<p>You should find that the cities table on the Wikipedia page corresponds to the element</p>
<pre><code>&lt;table class="wikitable sortable jquery-tablesorter" style="text-align:center"&gt;</code></pre>
<p>There are many <code>&lt;table&gt;</code> tags on the page.</p>
<div id="cell-12" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="82e5898b-313d-4189-94a2-eecd11b5ee49" data-execution_count="34">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(soup.find_all(<span class="st">"table"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<pre><code>10</code></pre>
</div>
</div>
<p>We can use attributes like <code>class=</code> and <code>style=</code> to narrow down the list.</p>
<div id="cell-14" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="8fec5076-33df-47dc-ca07-c46434bb8e4e" data-execution_count="35">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(soup.select_one(<span class="st">"table"</span>,</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>                  attrs<span class="op">=</span>{</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"class"</span>: <span class="st">"sortable wikitable sticky-header multi static row-numbers sort-under col1left col2center jquery-tablesorter"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"style"</span>: <span class="st">"text-align:right"</span>}</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>                  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>1</code></pre>
</div>
</div>
<p>At this point, you can manually inspect the tables on the webpage to find that the one we want is the first one (see <code>[0]</code> below). We’ll store this as <code>table</code>.</p>
<div id="cell-16" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> soup.find_all(<span class="st">"table"</span>,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>                  attrs<span class="op">=</span>{</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"class"</span> : <span class="st">"sortable wikitable sticky-header-multi static-row-numbers sort-under col1left col2center"</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"style"</span> : <span class="st">"text-align:right"</span>}</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                  )[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Now you will write code to scrape the information in <code>table</code> to create a Pandas data frame with one row for each city and columns for: city, state, population (2022 estimate), and 2020 land area (sq mi).</strong> Refer to the Notes/suggestions below as you write your code. A few Hints are provided further down, but try coding first before looking at the hints.</p>
<p>Notes/suggestions:</p>
<ul>
<li>Use as a guide the code from the reading that produced the data frame of Statistics faculty</li>
<li>Inspect the page source as you write your code</li>
<li>You will need to write a loop to get the information for all cities, but you might want to try just scraping the info for New York first</li>
<li>You will need to pull the text from the tag. If <code>.text</code> returns text with “” at the end, try <code>.get_text(strip = True)</code> instead of <code>.text</code></li>
<li>Don’t forget to convert to a Pandas Data Frame; it should have 333 rows and 4 columns</li>
<li>The goal of this exercise is just to create the Data Frame. If you were going to use it — e.g., what is the population density for all cities in CA? — then you would need to clean the data first (to clean strings and convert to quantitative). (You can use Beautiful Soup to do some of the cleaning for you, but that goes beyond our scope.)</li>
</ul>
<div id="cell-19" class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># YOUR CODE HERE. ADD AS MANY CELLS AS NEEDED</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-20" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>rows <span class="op">=</span> table.find_all(<span class="st">"tr"</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>cities <span class="op">=</span> []</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>states <span class="op">=</span> []</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>populations <span class="op">=</span> []</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>areas <span class="op">=</span> []</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> rows <span class="kw">in</span> rows[<span class="dv">1</span>:]:</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    columns <span class="op">=</span> rows.find_all(<span class="st">"td"</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(columns)<span class="op">&gt;</span><span class="dv">0</span>:</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>      cities.append(columns[<span class="dv">0</span>].get_text(strip<span class="op">=</span><span class="va">True</span>))</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>      states.append(columns[<span class="dv">1</span>].get_text(strip<span class="op">=</span><span class="va">True</span>))</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>      populations.append(columns[<span class="dv">2</span>].get_text(strip<span class="op">=</span><span class="va">True</span>))</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>      areas.append(columns[<span class="dv">5</span>].get_text(strip<span class="op">=</span><span class="va">True</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-21" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:206}}" data-outputid="13c965a0-8938-4c13-9783-b429669143a0" data-execution_count="46">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"City"</span>: cities,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"State"</span>: states,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Population"</span>: populations,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Area"</span>: areas</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<div id="df-2fd130ad-1bcd-41ee-8a19-bb80a1cd955c" class="colab-df-container">
    <div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">City</th>
<th data-quarto-table-cell-role="th">State</th>
<th data-quarto-table-cell-role="th">Population</th>
<th data-quarto-table-cell-role="th">Area</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>New York[c]</td>
<td>NY</td>
<td>8,478,072</td>
<td>300.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Los Angeles</td>
<td>CA</td>
<td>3,878,704</td>
<td>469.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Chicago</td>
<td>IL</td>
<td>2,721,308</td>
<td>227.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Houston</td>
<td>TX</td>
<td>2,390,125</td>
<td>640.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Phoenix</td>
<td>AZ</td>
<td>1,673,164</td>
<td>518.0</td>
</tr>
</tbody>
</table>

</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-2fd130ad-1bcd-41ee-8a19-bb80a1cd955c')" title="Convert this dataframe to an interactive table." style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"></path>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-2fd130ad-1bcd-41ee-8a19-bb80a1cd955c button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-2fd130ad-1bcd-41ee-8a19-bb80a1cd955c');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


    <div id="df-712b932f-e0b2-4bd1-a2dd-02bdcdcba8c3">
      <button class="colab-df-quickchart" onclick="quickchart('df-712b932f-e0b2-4bd1-a2dd-02bdcdcba8c3')" title="Suggest charts" style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 0 24 24" width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path>
    </g>
</svg>
      </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

      <script>
        async function quickchart(key) {
          const quickchartButtonEl =
            document.querySelector('#' + key + ' button');
          quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
          quickchartButtonEl.classList.add('colab-df-spinner');
          try {
            const charts = await google.colab.kernel.invokeFunction(
                'suggestCharts', [key], {});
          } catch (error) {
            console.error('Error during call to suggestCharts:', error);
          }
          quickchartButtonEl.classList.remove('colab-df-spinner');
          quickchartButtonEl.classList.add('colab-df-quickchart-complete');
        }
        (() => {
          let quickchartButtonEl =
            document.querySelector('#df-712b932f-e0b2-4bd1-a2dd-02bdcdcba8c3 button');
          quickchartButtonEl.style.display =
            google.colab.kernel.accessAllowed ? 'block' : 'none';
        })();
      </script>
    </div>

    </div>
  </div>
</div>
</div>
<p>Hints:</p>
<ul>
<li>Each city is a row in the table; find all the <code>&lt;tr&gt;</code> tags to find all the cities</li>
<li>Look for the <code>&lt;td&gt;</code> tag to see table entries within a row</li>
<li>The rank column is represented by <code>&lt;th&gt;</code> tags, rather than <code>&lt;td&gt;</code> tags. So within a row, the first (that is, <code>[0]</code>) <code>&lt;td&gt;</code> tag corresponds to the city name.</li>
</ul>
</section>
<section id="aside-scraping-an-html-table-with-pandas" class="level2">
<h2 class="anchored" data-anchor-id="aside-scraping-an-html-table-with-pandas">Aside: Scraping an HTML table with Pandas</h2>
<p>The Pandas command <code>read_html</code> can be used to scrape information from an HTML table on a webpage.</p>
<p>We can call <code>read_html</code> on the URL.</p>
<div id="cell-25" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="187db13f-6aa0-4529-b815-1aafc32083da" data-execution_count="50">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>pd.read_html(<span class="st">"https://en.wikipedia.org/wiki/List_of_United_States_cities_by_population"</span>, storage_options<span class="op">=</span>{<span class="st">'User-Agent'</span>: <span class="st">'Mozilla/5.0 (Windows NT 10.0; Win64; x64)'</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<pre><code>[                    Population tables of U.S. cities
 0  The skyline of New York City, the most populou...
 1                                             Cities
 2  PopulationAreaDensityEthnic identityForeign-bo...
 3                                        Urban areas
 4             Populous cities and metropolitan areas
 5                                 Metropolitan areas
 6  184 combined statistical areas935 core-based s...
 7                                        Megaregions
 8  Related population listsNorth American metro a...
 9                                                vte,
     0                               1
 0 NaN                   State capital
 1 NaN            State's largest city
 2 NaN  State capital and largest city
 3 NaN                 Federal capital,
             City  ST 2024 estimate 2020 census  Change 2020 land area          \
             City  ST 2024 estimate 2020 census  Change            mi2     km2   
 0    New York[c]  NY       8478072     8804190  −3.70%          300.5   778.3   
 1    Los Angeles  CA       3878704     3898747  −0.51%          469.5  1216.0   
 2        Chicago  IL       2721308     2746388  −0.91%          227.7   589.7   
 3        Houston  TX       2390125     2304580  +3.71%          640.4  1658.6   
 4        Phoenix  AZ       1673164     1608139  +4.04%          518.0  1341.6   
 ..           ...  ..           ...         ...     ...            ...     ...   
 341      Deltona  FL        100513       93692  +7.28%           37.3    96.6   
 342  Federal Way  WA        100252      101030  −0.77%           22.3    57.8   
 343   San Angelo  TX        100159       99893  +0.27%           59.7   154.6   
 344        Tracy  CA        100136       93000  +7.67%           25.9    67.1   
 345      Sunrise  FL        100128       97335  +2.87%           16.2    42.0   
 
     2020 density                                      Location  
            / mi2  / km2                               Location  
 0          29298  11312    40°40′N 73°56′W﻿ / ﻿40.66°N 73.94°W  
 1           8304   3206  34°01′N 118°25′W﻿ / ﻿34.02°N 118.41°W  
 2          12061   4657    41°50′N 87°41′W﻿ / ﻿41.84°N 87.68°W  
 3           3599   1390    29°47′N 95°23′W﻿ / ﻿29.79°N 95.39°W  
 4           3105   1199  33°34′N 112°05′W﻿ / ﻿33.57°N 112.09°W  
 ..           ...    ...                                    ...  
 341         2512    970    28°55′N 81°13′W﻿ / ﻿28.91°N 81.21°W  
 342         4530   1750  47°19′N 122°20′W﻿ / ﻿47.31°N 122.34°W  
 343         1673    646  31°26′N 100°27′W﻿ / ﻿31.44°N 100.45°W  
 344         3591   1386  37°44′N 121°27′W﻿ / ﻿37.73°N 121.45°W  
 345         6008   2320    26°10′N 80°16′W﻿ / ﻿26.17°N 80.26°W  
 
 [346 rows x 10 columns],
          Population  Number of municipal governments
 0        1,000,000+                               11
 1   900,000–999,999                                4
 2   800,000–899,999                                2
 3   700,000–799,999                                5
 4   600,000–699,999                                7
 5   500,000–599,999                                9
 6   400,000–499,999                               14
 7   300,000–399,999                               20
 8   200,000–299,999                               56
 9   100,000–199,999                              218
 10            Total                              346,
                                                 State  Number of listed cities
 0                                          California                       76
 1                                               Texas                       44
 2                                             Florida                       27
 3                                             Arizona                       13
 4                                            Colorado                       12
 5                          North Carolina, Washington                       10
 6                                       Massachusetts                        9
 7               Georgia, Illinois, Michigan, Virginia                        8
 8                                          New Jersey                        7
 9   Indiana, Missouri, New York, Ohio, Oregon, Ten...                        6
 10         Alabama, Connecticut, Kansas, Nevada, Utah                        5
 11                                Louisiana, Oklahoma                        4
 12  Idaho, Iowa, Minnesota, New Mexico, Pennsylvan...                        3
 13                       Arkansas, Kentucky, Nebraska                        2
 14  Alaska, District of Columbia, Hawaii, Maryland...                        1
 15   Delaware, Maine, Vermont, West Virginia, Wyoming                        0,
   Municipio  2024 estimate  2020 census  Change 2020 land area  \
 0  San Juan         332454       342259  −2.86%     39.8&nbsp;sq&nbsp;mi   
 1   Bayamón         181152       185187  −2.18%     27.0&nbsp;sq&nbsp;mi   
 2  Carolina         150679       154815  −2.67%     20.7&nbsp;sq&nbsp;mi   
 3     Ponce         129659       137491  −5.70%     28.4&nbsp;sq&nbsp;mi   
 4    Caguas         124628       127244  −2.06%     10.9&nbsp;sq&nbsp;mi   
 
   2020 land area.1  2020 density 2020 density.1  \
 0        103.1&nbsp;km2   8,599/sq&nbsp;mi      3,320/km2   
 1         69.9&nbsp;km2   6,859/sq&nbsp;mi      2,648/km2   
 2         53.6&nbsp;km2   7,479/sq&nbsp;mi      2,888/km2   
 3         73.6&nbsp;km2   4,841/sq&nbsp;mi      1,869/km2   
 4         28.2&nbsp;km2  11,674/sq&nbsp;mi      4,507/km2   
 
                               Location  
 0  18°24′N 66°04′W﻿ / ﻿18.40°N 66.06°W  
 1  18°23′N 66°10′W﻿ / ﻿18.38°N 66.16°W  
 2  18°25′N 65°59′W﻿ / ﻿18.41°N 65.98°W  
 3  18°00′N 66°37′W﻿ / ﻿18.00°N 66.62°W  
 4  18°14′N 66°02′W﻿ / ﻿18.23°N 66.04°W  ,
    Census- designated place  ST 2020 census 2010 census    Change  \
    Census- designated place  ST 2020 census 2010 census    Change   
 0                 Arlington  VA      238643      207627   +14.94%   
 1                Enterprise  NV      221831      108481  +104.49%   
 2             Spring Valley  NV      215597      178395   +20.85%   
 3             Sunrise Manor  NV      205618      189372    +8.58%   
 4                  Paradise  NV      191238      223167   −14.31%   
 5                  Metairie  LA      143507      138481    +3.63%   
 6          East Los Angeles  CA      118786      126496    −6.10%   
 7                   Brandon  FL      114626      103483   +10.77%   
 8             The Woodlands  TX      114436       93847   +21.94%   
 9              Lehigh Acres  FL      114287       86784   +31.69%   
 10              Spring Hill  FL      113568       98621   +15.16%   
 11                Riverview  FL      107396       71050   +51.16%   
 12                 Columbia  MD      104681       99615    +5.09%   
 13          Highlands Ranch  CO      103444       96713    +6.96%   
 
    2020 land area          2020 density        \
               mi2      km2        / mi2 / km2   
 0            26.0   67.340         9179  3544   
 1            66.0  170.939         3361  1298   
 2            35.5   91.945         6073  2345   
 3            33.7   87.283         6101  2356   
 4            42.4  109.815         4510  1740   
 5            23.3   60.347         6159  2378   
 6             7.5   19.425        15838  6115   
 7            33.1   85.729         3463  1337   
 8            43.3  112.146         2643  1020   
 9            92.7  240.092         1233   476   
 10           59.9  155.140         1896   732   
 11           46.2  119.657         2325   898   
 12           31.9   82.621         3282  1267   
 13           24.3   62.937         4257  1644   
 
                                  Location  
                                  Location  
 0     38°53′N 77°06′W﻿ / ﻿38.88°N 77.10°W  
 1   36°01′N 115°14′W﻿ / ﻿36.01°N 115.23°W  
 2   36°06′N 115°16′W﻿ / ﻿36.10°N 115.26°W  
 3   36°11′N 115°03′W﻿ / ﻿36.18°N 115.05°W  
 4   36°05′N 115°08′W﻿ / ﻿36.09°N 115.14°W  
 5     30°00′N 90°11′W﻿ / ﻿30.00°N 90.18°W  
 6   34°02′N 118°10′W﻿ / ﻿34.03°N 118.17°W  
 7     27°56′N 82°18′W﻿ / ﻿27.94°N 82.30°W  
 8     30°10′N 95°31′W﻿ / ﻿30.17°N 95.51°W  
 9     26°37′N 81°38′W﻿ / ﻿26.61°N 81.64°W  
 10    28°29′N 82°32′W﻿ / ﻿28.48°N 82.53°W  
 11    27°49′N 82°18′W﻿ / ﻿27.82°N 82.30°W  
 12    39°12′N 76°52′W﻿ / ﻿39.20°N 76.86°W  
 13  39°32′N 104°58′W﻿ / ﻿39.54°N 104.97°W  ,
               City  ST  2024 estimate  Peak population % decline from peak  \
 0        Allegheny  PA            NaN           129896                 NaN   
 1         Brooklyn  NY            NaN           806343                 NaN   
 2           Camden  NJ        71749.0           124555             −42.40%   
 3           Canton  OH        69211.0           116912             −40.80%   
 4   Citrus Heights  CA        86909.0           107439             −19.11%   
 5           Duluth  MN        87986.0           107312             −18.01%   
 6             Erie  PA        92940.0           138440             −32.87%   
 7       Fall River  MA        94689.0           120485             −21.41%   
 8            Flint  MI        79735.0           196940             −59.51%   
 9             Gary  IN        67555.0           178320             −62.12%   
 10         Hammond  IN        76030.0           111698             −31.93%   
 11         Livonia  MI        93113.0           110109             −15.44%   
 12   Niagara Falls  NY        47512.0           102394             −53.60%   
 13         Norwalk  CA        98230.0           105549              −6.93%   
 14           Parma  OH        79350.0           100216             −20.82%   
 15      Portsmouth  VA        96482.0           114773             −15.94%   
 16         Reading  PA        96000.0           111171             −13.65%   
 17         Roanoke  VA        97912.0           100220              −2.30%   
 18        Scranton  PA        75905.0           143333             −47.04%   
 19      Somerville  MA        82149.0           103908             −20.94%   
 20      St. Joseph  MO        71098.0           102979             −30.96%   
 21         Trenton  NJ        91193.0           128009             −28.76%   
 22           Utica  NY        63660.0           101740             −37.43%   
 23      Wilmington  DE        73176.0           112504             −34.96%   
 24      Youngstown  OH        59123.0           170002             −65.22%   
 
     Peak year Unnamed: 6  
 0        1907       [ab]  
 1        1898       [ac]  
 2        1950        NaN  
 3        1950        NaN  
 4        1990        NaN  
 5        1960        NaN  
 6        1960        NaN  
 7        1920        NaN  
 8        1960        NaN  
 9        1960        NaN  
 10       1960        NaN  
 11       1970        NaN  
 12       1960        NaN  
 13       2010        NaN  
 14       1970        NaN  
 15       1960        NaN  
 16       1930        NaN  
 17       1980        NaN  
 18       1930        NaN  
 19       1930        NaN  
 20       1900       [ad]  
 21       1950        NaN  
 22       1930        NaN  
 23       1940        NaN  
 24       1930        NaN  ,
   vteThe 100 most populous cities of the United States  \
 0  New York, New York Los Angeles, California Chi...     
 1                                                NaN     
 2  Cities ranked by United States Census Bureau p...     
 
   vteThe 100 most populous cities of the United States.1  \
 0  New York, New York Los Angeles, California Chi...       
 1  New York, New York Los Angeles, California Chi...       
 2  Cities ranked by United States Census Bureau p...       
 
                                           Unnamed: 2  \
 0                                                NaN   
 1  Detroit, Michigan Louisville, Kentucky Portlan...   
 2                                                NaN   
 
                                           Unnamed: 3  \
 0                                                NaN   
 1  Aurora, Colorado Wichita, Kansas Cleveland, Oh...   
 2                                                NaN   
 
                                           Unnamed: 4  
 0                                                NaN  
 1  Gilbert, Arizona Madison, Wisconsin Reno, Neva...  
 2                                                NaN  ,
     0                                                  1  \
 0 NaN  New York, New York Los Angeles, California Chi...   
 
                                                    2  \
 0  Detroit, Michigan Louisville, Kentucky Portlan...   
 
                                                    3  \
 0  Aurora, Colorado Wichita, Kansas Cleveland, Oh...   
 
                                                    4  
 0  Gilbert, Arizona Madison, Wisconsin Reno, Neva...  ]</code></pre>
</div>
</div>
<p>However, this scrapes all the tables on the webpage, not just the one we want. As with Beautiful Soup, we can narrow the search by specifying the table attributes.</p>
<div id="cell-27" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="4008f470-f6e2-4db8-fb5e-97ef4e774bb7" data-execution_count="56">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>pd.read_html(<span class="st">"https://en.wikipedia.org/wiki/List_of_United_States_cities_by_population"</span>, storage_options<span class="op">=</span>{<span class="st">'User-Agent'</span>: <span class="st">'Mozilla/5.0 (Windows NT 10.0; Win64; x64)'</span>}, attrs <span class="op">=</span> {<span class="st">'class'</span>: <span class="st">'wikitable'</span>, <span class="st">"style"</span>: <span class="st">"text-align:right"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="56">
<pre><code>[            City  ST 2024 estimate 2020 census  Change 2020 land area          \
             City  ST 2024 estimate 2020 census  Change            mi2     km2   
 0    New York[c]  NY       8478072     8804190  −3.70%          300.5   778.3   
 1    Los Angeles  CA       3878704     3898747  −0.51%          469.5  1216.0   
 2        Chicago  IL       2721308     2746388  −0.91%          227.7   589.7   
 3        Houston  TX       2390125     2304580  +3.71%          640.4  1658.6   
 4        Phoenix  AZ       1673164     1608139  +4.04%          518.0  1341.6   
 ..           ...  ..           ...         ...     ...            ...     ...   
 341      Deltona  FL        100513       93692  +7.28%           37.3    96.6   
 342  Federal Way  WA        100252      101030  −0.77%           22.3    57.8   
 343   San Angelo  TX        100159       99893  +0.27%           59.7   154.6   
 344        Tracy  CA        100136       93000  +7.67%           25.9    67.1   
 345      Sunrise  FL        100128       97335  +2.87%           16.2    42.0   
 
     2020 density                                      Location  
            / mi2  / km2                               Location  
 0          29298  11312    40°40′N 73°56′W﻿ / ﻿40.66°N 73.94°W  
 1           8304   3206  34°01′N 118°25′W﻿ / ﻿34.02°N 118.41°W  
 2          12061   4657    41°50′N 87°41′W﻿ / ﻿41.84°N 87.68°W  
 3           3599   1390    29°47′N 95°23′W﻿ / ﻿29.79°N 95.39°W  
 4           3105   1199  33°34′N 112°05′W﻿ / ﻿33.57°N 112.09°W  
 ..           ...    ...                                    ...  
 341         2512    970    28°55′N 81°13′W﻿ / ﻿28.91°N 81.21°W  
 342         4530   1750  47°19′N 122°20′W﻿ / ﻿47.31°N 122.34°W  
 343         1673    646  31°26′N 100°27′W﻿ / ﻿31.44°N 100.45°W  
 344         3591   1386  37°44′N 121°27′W﻿ / ﻿37.73°N 121.45°W  
 345         6008   2320    26°10′N 80°16′W﻿ / ﻿26.17°N 80.26°W  
 
 [346 rows x 10 columns],
   Municipio  2024 estimate  2020 census  Change 2020 land area  \
 0  San Juan         332454       342259  −2.86%     39.8&nbsp;sq&nbsp;mi   
 1   Bayamón         181152       185187  −2.18%     27.0&nbsp;sq&nbsp;mi   
 2  Carolina         150679       154815  −2.67%     20.7&nbsp;sq&nbsp;mi   
 3     Ponce         129659       137491  −5.70%     28.4&nbsp;sq&nbsp;mi   
 4    Caguas         124628       127244  −2.06%     10.9&nbsp;sq&nbsp;mi   
 
   2020 land area.1  2020 density 2020 density.1  \
 0        103.1&nbsp;km2   8,599/sq&nbsp;mi      3,320/km2   
 1         69.9&nbsp;km2   6,859/sq&nbsp;mi      2,648/km2   
 2         53.6&nbsp;km2   7,479/sq&nbsp;mi      2,888/km2   
 3         73.6&nbsp;km2   4,841/sq&nbsp;mi      1,869/km2   
 4         28.2&nbsp;km2  11,674/sq&nbsp;mi      4,507/km2   
 
                               Location  
 0  18°24′N 66°04′W﻿ / ﻿18.40°N 66.06°W  
 1  18°23′N 66°10′W﻿ / ﻿18.38°N 66.16°W  
 2  18°25′N 65°59′W﻿ / ﻿18.41°N 65.98°W  
 3  18°00′N 66°37′W﻿ / ﻿18.00°N 66.62°W  
 4  18°14′N 66°02′W﻿ / ﻿18.23°N 66.04°W  ,
               City  ST  2024 estimate  Peak population % decline from peak  \
 0        Allegheny  PA            NaN           129896                 NaN   
 1         Brooklyn  NY            NaN           806343                 NaN   
 2           Camden  NJ        71749.0           124555             −42.40%   
 3           Canton  OH        69211.0           116912             −40.80%   
 4   Citrus Heights  CA        86909.0           107439             −19.11%   
 5           Duluth  MN        87986.0           107312             −18.01%   
 6             Erie  PA        92940.0           138440             −32.87%   
 7       Fall River  MA        94689.0           120485             −21.41%   
 8            Flint  MI        79735.0           196940             −59.51%   
 9             Gary  IN        67555.0           178320             −62.12%   
 10         Hammond  IN        76030.0           111698             −31.93%   
 11         Livonia  MI        93113.0           110109             −15.44%   
 12   Niagara Falls  NY        47512.0           102394             −53.60%   
 13         Norwalk  CA        98230.0           105549              −6.93%   
 14           Parma  OH        79350.0           100216             −20.82%   
 15      Portsmouth  VA        96482.0           114773             −15.94%   
 16         Reading  PA        96000.0           111171             −13.65%   
 17         Roanoke  VA        97912.0           100220              −2.30%   
 18        Scranton  PA        75905.0           143333             −47.04%   
 19      Somerville  MA        82149.0           103908             −20.94%   
 20      St. Joseph  MO        71098.0           102979             −30.96%   
 21         Trenton  NJ        91193.0           128009             −28.76%   
 22           Utica  NY        63660.0           101740             −37.43%   
 23      Wilmington  DE        73176.0           112504             −34.96%   
 24      Youngstown  OH        59123.0           170002             −65.22%   
 
     Peak year Unnamed: 6  
 0        1907       [ab]  
 1        1898       [ac]  
 2        1950        NaN  
 3        1950        NaN  
 4        1990        NaN  
 5        1960        NaN  
 6        1960        NaN  
 7        1920        NaN  
 8        1960        NaN  
 9        1960        NaN  
 10       1960        NaN  
 11       1970        NaN  
 12       1960        NaN  
 13       2010        NaN  
 14       1970        NaN  
 15       1960        NaN  
 16       1930        NaN  
 17       1980        NaN  
 18       1930        NaN  
 19       1930        NaN  
 20       1900       [ad]  
 21       1950        NaN  
 22       1930        NaN  
 23       1940        NaN  
 24       1930        NaN  ]</code></pre>
</div>
</div>
<p>This still returns 3 tables. As we remarked above, the table that we want is the first one (see <code>[0]</code> below).</p>
<div id="cell-29" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:455}}" data-outputid="fbd60fd2-28b2-481b-d683-b638d32ea32d" data-execution_count="58">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df_cities2 <span class="op">=</span> pd.read_html(<span class="st">"https://en.wikipedia.org/wiki/List_of_United_States_cities_by_population"</span>, storage_options<span class="op">=</span>{<span class="st">'User-Agent'</span>: <span class="st">'Mozilla/5.0 (Windows NT 10.0; Win64; x64)'</span>}, attrs <span class="op">=</span> {<span class="st">'class'</span>: <span class="st">'sortable wikitable sticky-header-multi static-row-numbers sort-under col1left col2center'</span>, <span class="st">"style"</span>: <span class="st">"text-align:right"</span>})[<span class="dv">0</span>]</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>df_cities2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="58">
<div id="df-0170161f-8dac-4e97-9ac2-9fdc62434223" class="colab-df-container">
    <div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">City</th>
<th data-quarto-table-cell-role="th">ST</th>
<th data-quarto-table-cell-role="th">2024 estimate</th>
<th data-quarto-table-cell-role="th">2020 census</th>
<th data-quarto-table-cell-role="th">Change</th>
<th colspan="2" data-quarto-table-cell-role="th" data-halign="left">2020 land area</th>
<th colspan="2" data-quarto-table-cell-role="th" data-halign="left">2020 density</th>
<th data-quarto-table-cell-role="th">Location</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">City</th>
<th data-quarto-table-cell-role="th">ST</th>
<th data-quarto-table-cell-role="th">2024 estimate</th>
<th data-quarto-table-cell-role="th">2020 census</th>
<th data-quarto-table-cell-role="th">Change</th>
<th data-quarto-table-cell-role="th">mi2</th>
<th data-quarto-table-cell-role="th">km2</th>
<th data-quarto-table-cell-role="th">/ mi2</th>
<th data-quarto-table-cell-role="th">/ km2</th>
<th data-quarto-table-cell-role="th">Location</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>New York[c]</td>
<td>NY</td>
<td>8478072</td>
<td>8804190</td>
<td>−3.70%</td>
<td>300.5</td>
<td>778.3</td>
<td>29298</td>
<td>11312</td>
<td>40°40′N 73°56′W﻿ / ﻿40.66°N 73.94°W</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Los Angeles</td>
<td>CA</td>
<td>3878704</td>
<td>3898747</td>
<td>−0.51%</td>
<td>469.5</td>
<td>1216.0</td>
<td>8304</td>
<td>3206</td>
<td>34°01′N 118°25′W﻿ / ﻿34.02°N 118.41°W</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Chicago</td>
<td>IL</td>
<td>2721308</td>
<td>2746388</td>
<td>−0.91%</td>
<td>227.7</td>
<td>589.7</td>
<td>12061</td>
<td>4657</td>
<td>41°50′N 87°41′W﻿ / ﻿41.84°N 87.68°W</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Houston</td>
<td>TX</td>
<td>2390125</td>
<td>2304580</td>
<td>+3.71%</td>
<td>640.4</td>
<td>1658.6</td>
<td>3599</td>
<td>1390</td>
<td>29°47′N 95°23′W﻿ / ﻿29.79°N 95.39°W</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Phoenix</td>
<td>AZ</td>
<td>1673164</td>
<td>1608139</td>
<td>+4.04%</td>
<td>518.0</td>
<td>1341.6</td>
<td>3105</td>
<td>1199</td>
<td>33°34′N 112°05′W﻿ / ﻿33.57°N 112.09°W</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">341</td>
<td>Deltona</td>
<td>FL</td>
<td>100513</td>
<td>93692</td>
<td>+7.28%</td>
<td>37.3</td>
<td>96.6</td>
<td>2512</td>
<td>970</td>
<td>28°55′N 81°13′W﻿ / ﻿28.91°N 81.21°W</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">342</td>
<td>Federal Way</td>
<td>WA</td>
<td>100252</td>
<td>101030</td>
<td>−0.77%</td>
<td>22.3</td>
<td>57.8</td>
<td>4530</td>
<td>1750</td>
<td>47°19′N 122°20′W﻿ / ﻿47.31°N 122.34°W</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">343</td>
<td>San Angelo</td>
<td>TX</td>
<td>100159</td>
<td>99893</td>
<td>+0.27%</td>
<td>59.7</td>
<td>154.6</td>
<td>1673</td>
<td>646</td>
<td>31°26′N 100°27′W﻿ / ﻿31.44°N 100.45°W</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">344</td>
<td>Tracy</td>
<td>CA</td>
<td>100136</td>
<td>93000</td>
<td>+7.67%</td>
<td>25.9</td>
<td>67.1</td>
<td>3591</td>
<td>1386</td>
<td>37°44′N 121°27′W﻿ / ﻿37.73°N 121.45°W</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">345</td>
<td>Sunrise</td>
<td>FL</td>
<td>100128</td>
<td>97335</td>
<td>+2.87%</td>
<td>16.2</td>
<td>42.0</td>
<td>6008</td>
<td>2320</td>
<td>26°10′N 80°16′W﻿ / ﻿26.17°N 80.26°W</td>
</tr>
</tbody>
</table>

<p>346 rows × 10 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-0170161f-8dac-4e97-9ac2-9fdc62434223')" title="Convert this dataframe to an interactive table." style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"></path>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-0170161f-8dac-4e97-9ac2-9fdc62434223 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-0170161f-8dac-4e97-9ac2-9fdc62434223');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


    <div id="df-fa30b586-decd-4222-88b5-10b20e310e9b">
      <button class="colab-df-quickchart" onclick="quickchart('df-fa30b586-decd-4222-88b5-10b20e310e9b')" title="Suggest charts" style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 0 24 24" width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path>
    </g>
</svg>
      </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

      <script>
        async function quickchart(key) {
          const quickchartButtonEl =
            document.querySelector('#' + key + ' button');
          quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
          quickchartButtonEl.classList.add('colab-df-spinner');
          try {
            const charts = await google.colab.kernel.invokeFunction(
                'suggestCharts', [key], {});
          } catch (error) {
            console.error('Error during call to suggestCharts:', error);
          }
          quickchartButtonEl.classList.remove('colab-df-spinner');
          quickchartButtonEl.classList.add('colab-df-quickchart-complete');
        }
        (() => {
          let quickchartButtonEl =
            document.querySelector('#df-fa30b586-decd-4222-88b5-10b20e310e9b button');
          quickchartButtonEl.style.display =
            google.colab.kernel.accessAllowed ? 'block' : 'none';
        })();
      </script>
    </div>

  <div id="id_cba8a928-a7b4-4169-9f5a-229d2ad2f3ba">
    <style>
      .colab-df-generate {
        background-color: #E8F0FE;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        fill: #1967D2;
        height: 32px;
        padding: 0 0 0 0;
        width: 32px;
      }

      .colab-df-generate:hover {
        background-color: #E2EBFA;
        box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
        fill: #174EA6;
      }

      [theme=dark] .colab-df-generate {
        background-color: #3B4455;
        fill: #D2E3FC;
      }

      [theme=dark] .colab-df-generate:hover {
        background-color: #434B5C;
        box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
        filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
        fill: #FFFFFF;
      }
    </style>
    <button class="colab-df-generate" onclick="generateWithVariable('df_cities2')" title="Generate code using this dataframe." style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 0 24 24" width="24px">
    <path d="M7,19H8.4L18.45,9,17,7.55,7,17.6ZM5,21V16.75L18.45,3.32a2,2,0,0,1,2.83,0l1.4,1.43a1.91,1.91,0,0,1,.58,1.4,1.91,1.91,0,0,1-.58,1.4L9.25,21ZM18.45,9,17,7.55Zm-12,3A5.31,5.31,0,0,0,4.9,8.1,5.31,5.31,0,0,0,1,6.5,5.31,5.31,0,0,0,4.9,4.9,5.31,5.31,0,0,0,6.5,1,5.31,5.31,0,0,0,8.1,4.9,5.31,5.31,0,0,0,12,6.5,5.46,5.46,0,0,0,6.5,12Z"></path>
  </svg>
    </button>
    <script>
      (() => {
      const buttonEl =
        document.querySelector('#id_cba8a928-a7b4-4169-9f5a-229d2ad2f3ba button.colab-df-generate');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      buttonEl.onclick = () => {
        google.colab.notebook.generateWithVariable('df_cities2');
      }
      })();
    </script>
  </div>

    </div>
  </div>
</div>
</div>
<p>Wait, that seemed much easier than using Beautiful Soup, and it returned a data frame, and we even got for free some formatting like removing the commas from the population! Why didn’t we just use <code>read_html</code> in the first place? It’s true the <code>read_html</code> works well when scraping information from an HTML <em>table</em>. Unfortunately, you often want to scrape information from a webpage that isn’t conveniently stored in an HTML table, in which case <code>read_html</code> won’t work. (It only searches for <code>&lt;table&gt;</code>, <code>&lt;th&gt;</code>, <code>&lt;tr&gt;</code>, and <code>&lt;td&gt;</code> tags, but there are many other HTML tags.) Though Beautiful Soup is not as simple as <code>read_html</code>, it is more flexible and thus more widely applicable.</p>
</section>
<section id="scraping-information-that-is-not-in-a-table-with-beautiful-soup" class="level2">
<h2 class="anchored" data-anchor-id="scraping-information-that-is-not-in-a-table-with-beautiful-soup">Scraping information that is NOT in a <code>&lt;table&gt;</code> with Beautiful Soup</h2>
<p>The Cal Poly course catalog http://catalog.calpoly.edu/collegesandprograms/collegeofsciencemathematics/statistics/#courseinventory contains a list of courses offered by the Statistics department. <strong>You will scrape this website to obtain a Pandas data frame with one row for each DATA or STAT course and two columns: course name and number (e.g, DATA 301. Introduction to Data Science) and term typically offered (e.g., Term Typically Offered: F, W, SP).</strong></p>
<p>Note: Pandas <code>read_html</code> is not help here since the courses are not stored in a <code>&lt;table&gt;.</code></p>
<div id="cell-34" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}}" data-outputid="931f1b41-da62-4c52-a801-121263fd5138" data-execution_count="59">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>pd.read_html(<span class="st">"http://catalog.calpoly.edu/collegesandprograms/collegeofsciencemathematics/statistics/#courseinventory"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="59">
<pre><code>[                                        Program name   Program type
 0                              Actuarial Preparation          Minor
 1  Cross Disciplinary Studies Minor in Bioinforma...          Minor
 2   Cross Disciplinary Studies Minor in Data Science          Minor
 3                                         Statistics  BS, MS, Minor]</code></pre>
</div>
</div>
<p>Notes/suggestions:</p>
<ul>
<li>Inspect the page source as you write your code</li>
<li>The courses are not stored in a <code>&lt;table&gt;</code>. How are they stored?</li>
<li>You will need to write a loop to get the information for all courses, but you might want to try just scraping the info for DATA 100 first</li>
<li>What kind of tag is the course name stored in? What is the <code>class</code> of the tag?</li>
<li>What kind of tag is the quarter(s) the course is offered stored in? What is the <code>class</code> of the tag? Is this the only tag of this type with the class? How will you get the one you want?</li>
<li>You don’t have to remove the number of units (e.g., 4 units) from the course name and number, but you can try it if you want</li>
<li>You will need to pull the text from the tag. If <code>.text</code> returns text with “” at the end, try <code>get_text(strip = True)</code> instead of <code>text</code></li>
<li>Don’t forget to convert to a Pandas Data Frame; it should have 74 rows and 2 columns</li>
<li>The goal of this exercise is just to create the Data Frame. If you were going to use it then you might need to clean the data first. (You can use Beautiful Soup to do some of the cleaning for you, but that goes beyond our scope.)</li>
</ul>
<div id="cell-36" class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># YOUR CODE HERE. ADD AS MANY CELLS AS NEEDED</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-37" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>URL <span class="op">=</span> <span class="st">"http://catalog.calpoly.edu/collegesandprograms/collegeofsciencemathematics/statistics/#courseinventory"</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>HEADERS <span class="op">=</span> {<span class="st">"User-Agent"</span>: <span class="st">"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"</span>}</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(URL, headers<span class="op">=</span>HEADERS)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(response.content, <span class="st">"html.parser"</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>courses <span class="op">=</span> soup.find_all(<span class="st">"div"</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>                          attrs<span class="op">=</span>{</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"class"</span>: <span class="st">"courseblock"</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>                          }</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>course_name <span class="op">=</span> []</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>term_offered <span class="op">=</span> []</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> course <span class="kw">in</span> courses:</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  course_tag <span class="op">=</span> course.find(<span class="st">"p"</span>, attrs<span class="op">=</span>{<span class="st">"class"</span>: <span class="st">"courseblocktitle"</span>})</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> course_tag:</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    course_name.append(course_tag.get_text(strip<span class="op">=</span><span class="va">True</span>))</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>:</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>    course_name.append(<span class="va">None</span>)</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>  term_tag <span class="op">=</span> course.find(<span class="st">"p"</span>, attrs<span class="op">=</span>{<span class="st">"class"</span>: <span class="st">"noindent"</span>})</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> term_tag:</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    term_offered.append(term_tag.get_text(strip<span class="op">=</span><span class="va">True</span>))</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>:</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>    term_offered.append(<span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-38" class="cell" data-quarto-private-1="{&quot;key&quot;:&quot;colab&quot;,&quot;value&quot;:{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:424}}" data-outputid="2adb2dd0-8493-42d8-9f6d-848db4111750" data-execution_count="62">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>df_courses <span class="op">=</span> pd.DataFrame({</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Course Name"</span>: course_name,</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Term Offered"</span>: term_offered</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>df_courses</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="62">
<div id="df-491b69f7-6206-43c6-9a36-73099cee5251" class="colab-df-container">
    <div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Course Name</th>
<th data-quarto-table-cell-role="th">Term Offered</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>DATA&nbsp;100. Data Science for All I.4 units</td>
<td>Term Typically Offered: F, W, SP</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>DATA&nbsp;301. Introduction to Data Science.4 units</td>
<td>Term Typically Offered: F, W, SP</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>DATA&nbsp;401. Data Science Process and Ethics.3 units</td>
<td>Term Typically Offered: F</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>DATA&nbsp;402. Mathematical Foundations of Data Sci...</td>
<td>Term Typically Offered: F</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>DATA&nbsp;403. Data Science Projects Laboratory.1 unit</td>
<td>Term Typically Offered: F</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">69</td>
<td>STAT&nbsp;551. Statistical Learning with R.4 units</td>
<td>Term Typically Offered: F</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">70</td>
<td>STAT&nbsp;566. Graduate Consulting Practicum.2 units</td>
<td>Term Typically Offered: SP</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">71</td>
<td>STAT&nbsp;570. Selected Advanced Topics.1-4 units</td>
<td>Term Typically Offered: TBD</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">72</td>
<td>STAT&nbsp;590. Graduate Seminar in Statistics.1 unit</td>
<td>Term Typically Offered: F, W, SP</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">73</td>
<td>STAT&nbsp;599. Thesis.1-4 units</td>
<td>Term Typically Offered: TBD</td>
</tr>
</tbody>
</table>

<p>74 rows × 2 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-491b69f7-6206-43c6-9a36-73099cee5251')" title="Convert this dataframe to an interactive table." style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"></path>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-491b69f7-6206-43c6-9a36-73099cee5251 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-491b69f7-6206-43c6-9a36-73099cee5251');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


    <div id="df-092443d3-3d64-42be-89e6-5d9b6528a510">
      <button class="colab-df-quickchart" onclick="quickchart('df-092443d3-3d64-42be-89e6-5d9b6528a510')" title="Suggest charts" style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 0 24 24" width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path>
    </g>
</svg>
      </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

      <script>
        async function quickchart(key) {
          const quickchartButtonEl =
            document.querySelector('#' + key + ' button');
          quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
          quickchartButtonEl.classList.add('colab-df-spinner');
          try {
            const charts = await google.colab.kernel.invokeFunction(
                'suggestCharts', [key], {});
          } catch (error) {
            console.error('Error during call to suggestCharts:', error);
          }
          quickchartButtonEl.classList.remove('colab-df-spinner');
          quickchartButtonEl.classList.add('colab-df-quickchart-complete');
        }
        (() => {
          let quickchartButtonEl =
            document.querySelector('#df-092443d3-3d64-42be-89e6-5d9b6528a510 button');
          quickchartButtonEl.style.display =
            google.colab.kernel.accessAllowed ? 'block' : 'none';
        })();
      </script>
    </div>

  <div id="id_8c945778-c594-4ae2-90ed-cf982a4ce321">
    <style>
      .colab-df-generate {
        background-color: #E8F0FE;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        fill: #1967D2;
        height: 32px;
        padding: 0 0 0 0;
        width: 32px;
      }

      .colab-df-generate:hover {
        background-color: #E2EBFA;
        box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
        fill: #174EA6;
      }

      [theme=dark] .colab-df-generate {
        background-color: #3B4455;
        fill: #D2E3FC;
      }

      [theme=dark] .colab-df-generate:hover {
        background-color: #434B5C;
        box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
        filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
        fill: #FFFFFF;
      }
    </style>
    <button class="colab-df-generate" onclick="generateWithVariable('df_courses')" title="Generate code using this dataframe." style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 0 24 24" width="24px">
    <path d="M7,19H8.4L18.45,9,17,7.55,7,17.6ZM5,21V16.75L18.45,3.32a2,2,0,0,1,2.83,0l1.4,1.43a1.91,1.91,0,0,1,.58,1.4,1.91,1.91,0,0,1-.58,1.4L9.25,21ZM18.45,9,17,7.55Zm-12,3A5.31,5.31,0,0,0,4.9,8.1,5.31,5.31,0,0,0,1,6.5,5.31,5.31,0,0,0,4.9,4.9,5.31,5.31,0,0,0,6.5,1,5.31,5.31,0,0,0,8.1,4.9,5.31,5.31,0,0,0,12,6.5,5.46,5.46,0,0,0,6.5,12Z"></path>
  </svg>
    </button>
    <script>
      (() => {
      const buttonEl =
        document.querySelector('#id_8c945778-c594-4ae2-90ed-cf982a4ce321 button.colab-df-generate');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      buttonEl.onclick = () => {
        google.colab.notebook.generateWithVariable('df_courses');
      }
      })();
    </script>
  </div>

    </div>
  </div>
</div>
</div>
<p>Hints:</p>
<ul>
<li>Each course is represented by a <code>&lt;div&gt;</code> with <code>class=courseblock</code>, so you can find all the courses with <code>soup.find_all("div", {"class": "courseblock"})</code></li>
<li>The course name is in a <code>&lt;p&gt;</code> tag with <code>class=courseblocktitle</code>, inside a <code>&lt;strong&gt;</code> tag. (Though I don’t think we need to find the strong tag here.)</li>
<li>The term typically offered is in <code>&lt;p&gt;</code> tag with <code>class=noindent</code>. However, there are several tags with this class; term typically offered is the first one.</li>
<li>If you want to use Beautiful Soup to remove the course units (e.g., 4 units), find the <code>&lt;span&gt;</code> tag within the course name tag and <code>.extract()</code> this span tag</li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>